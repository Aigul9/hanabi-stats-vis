{"version":3,"sources":["constants.js","main.js"],"names":["DB_PATH","DB_USER","DB_PASSWORD","viz","empty","limit","exist","visible","item","classList","remove","add","notVisible","showError","text","document","getElementById","innerHTML","disable","disabled","value","enable","verify","radioPlayer","radioRecords","textPlayer","textRecords","textList","checked","isInt","cypher_add","list","split","length","join","cypher","console","log","num","Number","isInteger","draw","res","config","container_id","server_url","encrypted","server_user","server_password","labels","Player","caption","relationships","REL","thickness","initial_cypher","NeoVis","default","render","querySelector","open","e","handleChange","window","onload","addEventListener","button","onclick","preventDefault","keyup","et","keyCode"],"mappings":";AAAO,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,QAAA,QAAA,QAAA,iBAAA,EAAA,IAAMA,EAAU,sCACrBC,EAAU,QACVC,EAAc,8CAFT,QAAA,YAAA,EAAA,QAAA,QAAA,EAAA,QAAA,QAAA;;ACAP,aAEA,IAEIC,EAFJ,EAAA,QAAA,kBAGMC,EAAQ,kBACZC,EAAQ,oBACRC,EAAQ,mBAEV,SAASC,EAAQC,GACfA,EAAKC,UAAUC,OAAO,eACtBF,EAAKC,UAAUE,IAAI,WAGrB,SAASC,EAAWJ,GAClBA,EAAKC,UAAUE,IAAI,eAGrB,SAASE,EAAUC,GACjBC,SAASC,eAAe,WAAWC,UAAYH,EAC/CP,EAAQQ,SAASC,eAAe,YAGlC,SAASE,EAAQV,GACfA,EAAKW,UAAW,EAChBX,EAAKY,MAAQ,GAGf,SAASC,EAAOb,GACdA,EAAKW,UAAW,EAGlB,SAASG,IACDC,IAAAA,EAAcR,SAASC,eAAe,eACtCQ,EAAeT,SAASC,eAAe,gBACvCS,EAAaV,SAASC,eAAe,cAAcI,MACnDM,EAAcX,SAASC,eAAe,eAAeI,MACrDO,EAAWZ,SAASC,eAAe,YAAYI,MAEjDI,GAAAA,EAAaI,SAA2B,OAAhBF,GAAwC,KAAhBA,EAAoB,CAClEG,GAAAA,GAAOH,GAAc,CACnBI,IAAAA,EAAa,GACbC,EAAOJ,EAASK,MAAM,KAEtBD,EAAKE,OAAS,GAAiB,KAAZF,EAAK,KAC1BA,EAAO,IAAMA,EAAKG,KAAK,OAAS,IAChCJ,EAAiCC,oBAAAA,OAAAA,EAAjC,OAGII,IAAAA,EAAmCL,0BAAAA,OAAAA,EAA4BJ,mBAAAA,OAAAA,GAM9DS,OAJPC,QAAQC,IAAIF,GAEZvB,EAAWG,SAASC,eAAe,YAE5BmB,EAGA,OADPtB,EAAUR,IACH,EAEJ,GAAIkB,EAAYK,SAA0B,OAAfH,GAAsC,KAAfA,EAAmB,CACpEU,IAAAA,EAA6BV,oBAAAA,OAAAA,EAAnC,8BAEOU,OADPvB,EAAWG,SAASC,eAAe,YAC5BmB,EAGA,OADPtB,EAAUT,IACH,EAIX,SAASyB,EAAMS,GACTC,SAAAA,OAAOC,UAAUF,IAAQA,EAAM,GAAKA,GAAO,KAKjD,SAASG,IACHC,IAAAA,EAAMpB,IACN,GAACoB,EAAD,CAGAC,IAAAA,EAAS,CACXC,aAAc,MACdC,WAAY7C,EAFD,QAGX8C,UAAW,gBACXC,YAAa9C,EAJF,QAKX+C,gBAAiB9C,EALN,YAMX+C,OAAQ,CACNC,OAAQ,CACNC,QAAS,SAGbC,cAAe,CACbC,IAAK,CACHC,UAAW,SACXH,QAAS,WAGbI,eAAgBb,GAGd,KACFvC,EAAM,IAAIqD,OAAOC,QAAQd,IACrBe,SAEY3C,SAAS4C,cAAc,WAC/BC,MAAO,EACf,MAAOC,GACPzB,QAAQC,IAAIwB,GACZhD,EAAUP,KAId,SAASwD,IACDvC,IAAAA,EAAcR,SAASC,eAAe,eACtCQ,EAAeT,SAASC,eAAe,gBACzCS,EAAaV,SAASC,eAAe,cACrCU,EAAcX,SAASC,eAAe,eAEtCO,EAAYK,SACdV,EAAQQ,GACRL,EAAOI,IACED,EAAaI,UACtBV,EAAQO,GACRJ,EAAOK,IAIXqC,OAAOC,OAAS,WACdjD,SACGC,eAAe,eACfiD,iBAAiB,SAAUH,GAC9B/C,SACGC,eAAe,gBACfiD,iBAAiB,SAAUH,GAExBI,IAAAA,EAASnD,SAAS4C,cAAc,YACtCO,EAAOC,QAAU,SAAUN,GACzBA,EAAEO,iBACF3B,KAGFyB,EAAOG,MAAQ,SAAUR,GACJ,KAAfS,GAAGC,UACLV,EAAEO,iBACF3B","file":"main.b6c6abca.js","sourceRoot":"..\\src","sourcesContent":["export const DB_PATH = \"neo4j://4e956df7.databases.neo4j.io\",\r\n  DB_USER = \"neo4j\",\r\n  DB_PASSWORD = \"PVu30YN-VesHEoS3HYj963nMp6oZRgDYmxfnQpaCuzs\";\r\n","\"use strict\";\r\n\r\nimport { DB_PATH, DB_USER, DB_PASSWORD } from \"./constants.js\";\r\n\r\nvar viz;\r\nconst empty = \"Field is empty.\",\r\n  limit = \"Incorrect number.\",\r\n  exist = \"Incorrect query.\";\r\n\r\nfunction visible(item) {\r\n  item.classList.remove(\"not-visible\");\r\n  item.classList.add(\"visible\");\r\n}\r\n\r\nfunction notVisible(item) {\r\n  item.classList.add(\"not-visible\");\r\n}\r\n\r\nfunction showError(text) {\r\n  document.getElementById(\"message\").innerHTML = text;\r\n  visible(document.getElementById(\"message\"));\r\n}\r\n\r\nfunction disable(item) {\r\n  item.disabled = true;\r\n  item.value = \"\";\r\n}\r\n\r\nfunction enable(item) {\r\n  item.disabled = false;\r\n}\r\n\r\nfunction verify() {\r\n  const radioPlayer = document.getElementById(\"radioPlayer\");\r\n  const radioRecords = document.getElementById(\"radioRecords\");\r\n  const textPlayer = document.getElementById(\"textPlayer\").value;\r\n  const textRecords = document.getElementById(\"textRecords\").value;\r\n  const textList = document.getElementById(\"textList\").value;\r\n\r\n  if (radioRecords.checked && textRecords !== null && textRecords !== \"\") {\r\n    if (isInt(+textRecords)) {\r\n      var cypher_add = \"\";\r\n      var list = textList.split(\",\");\r\n\r\n      if (list.length > 0 && list[0] !== \"\") {\r\n        list = \"'\" + list.join(\"','\") + \"'\";\r\n        cypher_add = `WHERE n.name in [${list}] `;\r\n      }\r\n\r\n      const cypher = `MATCH (n)-[r:REL]->(m) ${cypher_add}RETURN * LIMIT ${textRecords}`;\r\n\r\n      console.log(cypher);\r\n\r\n      notVisible(document.getElementById(\"message\"));\r\n\r\n      return cypher;\r\n    } else {\r\n      showError(limit);\r\n      return false;\r\n    }\r\n  } else if (radioPlayer.checked && textPlayer !== null && textPlayer !== \"\") {\r\n    const cypher = `MATCH (p {name: '${textPlayer}'})-[r]-(t) RETURN p, r, t`;\r\n    notVisible(document.getElementById(\"message\"));\r\n    return cypher;\r\n  } else {\r\n    showError(empty);\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction isInt(num) {\r\n  if (Number.isInteger(num) && num > 0 && num <= 1000) {\r\n    return true;\r\n  } else return false;\r\n}\r\n\r\nfunction draw() {\r\n  var res = verify();\r\n  if (!res) {\r\n    return;\r\n  }\r\n  var config = {\r\n    container_id: \"viz\",\r\n    server_url: DB_PATH,\r\n    encrypted: \"ENCRYPTION_ON\",\r\n    server_user: DB_USER,\r\n    server_password: DB_PASSWORD,\r\n    labels: {\r\n      Player: {\r\n        caption: \"name\",\r\n      },\r\n    },\r\n    relationships: {\r\n      REL: {\r\n        thickness: \"weight\",\r\n        caption: \"weight\",\r\n      },\r\n    },\r\n    initial_cypher: res,\r\n  };\r\n\r\n  try {\r\n    viz = new NeoVis.default(config);\r\n    viz.render();\r\n\r\n    const details = document.querySelector(\"details\");\r\n    details.open = false;\r\n  } catch (e) {\r\n    console.log(e);\r\n    showError(exist);\r\n  }\r\n}\r\n\r\nfunction handleChange() {\r\n  const radioPlayer = document.getElementById(\"radioPlayer\");\r\n  const radioRecords = document.getElementById(\"radioRecords\");\r\n  var textPlayer = document.getElementById(\"textPlayer\");\r\n  var textRecords = document.getElementById(\"textRecords\");\r\n\r\n  if (radioPlayer.checked) {\r\n    disable(textRecords);\r\n    enable(textPlayer);\r\n  } else if (radioRecords.checked) {\r\n    disable(textPlayer);\r\n    enable(textRecords);\r\n  }\r\n}\r\n\r\nwindow.onload = function () {\r\n  document\r\n    .getElementById(\"radioPlayer\")\r\n    .addEventListener(\"change\", handleChange);\r\n  document\r\n    .getElementById(\"radioRecords\")\r\n    .addEventListener(\"change\", handleChange);\r\n\r\n  const button = document.querySelector(\".trigger\");\r\n  button.onclick = function (e) {\r\n    e.preventDefault();\r\n    draw();\r\n  };\r\n\r\n  button.keyup = function (e) {\r\n    if (et.keyCode === 13) {\r\n      e.preventDefault();\r\n      draw();\r\n    }\r\n  };\r\n};\r\n"]}